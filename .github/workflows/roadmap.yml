name: ðŸš€ Sync Roadmap Mirror

on:
  schedule:
    - cron: '0 */1 * * *'
  workflow_dispatch:

jobs:
  mirror:
    runs-on: ubuntu-latest
    name: Sync
    steps:
      - name: Checkout
        uses: actions/checkout@v4

      - name: Fetch Upstream
        run: |
          git clone https://github.com/kamranahmedse/developer-roadmap.git target
          cd target 

      - name: Sync to Repos
        run: |
            git remote add github https://${{ secrets.BOT_TOKEN }}github.com/offensive-vk/Roadmap.sh.git
            git remote add gitlab https://${{ secrets.GITLAB_TOKEN }}gitlab.com/offensive-vk/Roadmap.sh.git
            git push -u gitlab --all --force-with-lease
            git push -u github --all --force-with-lease
